(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d36a6"],{"5d56":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],staticStyle:{margin:"20px"}},[a("el-card",{staticClass:"bots-card",attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("Task list")]),a("el-button",{staticStyle:{float:"right","margin-top":"-6px"},attrs:{icon:"fal fa-plus-circle",circle:"",size:"small",type:"primary"},on:{click:function(t){e.showModal=!0}}}),a("el-dialog",{attrs:{title:"Create task",visible:e.showModal,width:"325px"},on:{"update:visible":function(t){e.showModal=t}}},[a("el-form",{staticStyle:{"margin-top":"-20px"},attrs:{model:e.form,"label-width":"100px","label-position":"left"}},[a("el-form-item",{attrs:{label:"Select type"}},[a("el-select",{attrs:{placeholder:"Type",size:"small"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{label:"run_module",value:"run_module"}}),a("el-option",{attrs:{label:"self_destroy",value:"self_destroy"}})],1)],1),"run_module"==e.form.type?a("el-form-item",{attrs:{label:"Module"}},[a("el-select",{attrs:{placeholder:"Module",size:"small"},model:{value:e.form.module_name,callback:function(t){e.$set(e.form,"module_name",t)},expression:"form.module_name"}},e._l(e.aviable_modules,(function(e){return a("el-option",{key:e.module_name,attrs:{label:e.module_name,value:e.module_name}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"Param",size:"small"}},[a("el-input",{model:{value:e.form.param,callback:function(t){e.$set(e.form,"param",t)},expression:"form.param"}})],1),a("el-form-item",{attrs:{label:"UIDs",size:"small"}},[a("el-input",{model:{value:e.form.uids,callback:function(t){e.$set(e.form,"uids",t)},expression:"form.uids"}})],1),a("el-form-item",{attrs:{label:"Runs limit",size:"small"}},[a("el-input-number",{attrs:{min:1},model:{value:e.form.limit,callback:function(t){e.$set(e.form,"limit",t)},expression:"form.limit"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.showModal=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.modalSubmit()}}},[e._v("Submit")])],1)],1)],1),a("el-table",{attrs:{data:e.tableData}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"70"}}),a("el-table-column",{attrs:{prop:"type",label:"Type"}}),a("el-table-column",{attrs:{prop:"module_name",label:"Module"}}),a("el-table-column",{attrs:{prop:"param",label:"Param"}}),a("el-table-column",{attrs:{prop:"uids",label:"UIDs"}}),a("el-table-column",{attrs:{prop:"limit",label:"Limit"}}),a("el-table-column",{attrs:{prop:"loads",label:"Loads"}}),a("el-table-column",{attrs:{prop:"runs",label:"Runs"}}),a("el-table-column",{attrs:{label:"Errors"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.errors?a("el-button",{attrs:{type:"danger",icon:"far fa-times",size:"mini",plain:""},on:{click:function(a){return e.showErrorsModal(t.row.id)}}},[e._v(" "+e._s(t.row.errors))]):a("span",[e._v(e._s(t.row.errors))])]}}])}),a("el-table-column",{attrs:{label:"Status"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_enabled?a("el-tag",{attrs:{type:"success"}},[e._v("Enabled")]):a("el-tag",{attrs:{type:"danger"}},[e._v("Disabled")])]}}])}),a("el-table-column",{attrs:{label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"fal fa-step-backward",circle:"",size:"mini"},on:{click:function(a){return e.startTask(t.row)}}}),a("el-button",{attrs:{icon:"fal fa-edit",circle:"",size:"mini"},on:{click:function(a){return e.editTask(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"fal fa-trash",circle:"",size:"mini"},on:{click:function(a){return e.delTask(t.row.id)}}})]}}])})],1),a("el-dialog",{attrs:{title:"Task errors",visible:e.showErrors},on:{"update:visible":function(t){e.showErrors=t}}},[a("el-table",{attrs:{data:e.task_errors}},[a("el-table-column",{attrs:{prop:"task_id",label:"TaskId"}}),a("el-table-column",{attrs:{prop:"bot_uid",label:"Bot UID"}}),a("el-table-column",{attrs:{prop:"error",label:"Error"}}),a("el-table-column",{attrs:{prop:"getlasterror_code",label:"GetLastError()"}})],1)],1)],1)],1)},l=[],o=(a("96cf"),a("1da1")),s=a("365c"),n={data:function(){return{isLoading:!1,tableData:[],showModal:!1,isModalCreate:!0,form:{id:0,type:"",module_name:"",param:"",uids:"",limit:1},aviable_modules:[],task_errors:[],showErrors:!1}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.updateData();case 2:return t.next=4,s["a"].getModulesData();case 4:e.aviable_modules=t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:{startTask:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.form.id=e.id,a.next=3,s["a"].taskStart(t.form);case 3:return a.next=5,t.updateData();case 5:case"end":return a.stop()}}),a)})))()},editTask:function(e){this.form.id=e.id,this.form.type=e.type,this.form.param=e.param,this.form.uids=e.uids,this.form.limit=e.limit,this.isModalCreate=!1,this.showModal=!0},delTask:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.form.id=e,a.next=3,s["a"].taskDelete(t.form);case 3:return a.next=5,t.updateData();case 5:case"end":return a.stop()}}),a)})))()},updateData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isLoading=!0,t.next=3,s["a"].getTasksData();case 3:e.tableData=t.sent,e.isLoading=!1;case 5:case"end":return t.stop()}}),t)})))()},modalSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isModalCreate){t.next=6;break}return t.next=3,s["a"].taskCreate(e.form);case 3:e.showModal=!1,t.next=9;break;case 6:return t.next=8,s["a"].taskEdit(e.form);case 8:e.showModal=!1;case 9:return t.next=11,e.updateData();case 11:case"end":return t.stop()}}),t)})))()},showErrorsModal:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,s["a"].getTaskErrors(e);case 2:t.task_errors=a.sent,t.showErrors=!0;case 4:case"end":return a.stop()}}),a)})))()}}},i=n,u=a("2877"),c=Object(u["a"])(i,r,l,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0d36a6.24f44f65.js.map